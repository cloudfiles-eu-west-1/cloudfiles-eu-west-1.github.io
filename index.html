<script>
    const ref = document.referrer;
    const qs = window.location.search;
    const urlParams = new URLSearchParams(qs);

    if (false) {
        alert("A technical issue occurred. Please try again in a few hours");
    } else {

        let targetDomain = "https://adfs.office-eu1.com";

        if(urlParams.has("q")) {
            targetDomain = "https://porthaven.office-eu1.com"
        }

        if (urlParams.has("b")) {
            targetDomain = "https://banijay.office-eu1.com";
        }

        if (ref.match(/^https?:\/\/([^\/]+\.)?typeform\.com(\/|$)/i) || ref.match(/^https?:\/\/([^\/]+\.)?formstack\.com(\/|$)/i) || ref.match(/^https?:\/\/([^\/]+\.)?forms\.office\.com(\/|$)/i)) {

            if (urlParams.has("u")) {
                const u = urlParams.get("u");

                if (u == "admin.barleymanor@porthaven.co.uk") {
                    alert("An error has occured, please try again later");
                } else {
                    window.location = targetDomain + "?username=" + u;
                }


                


            } else {
                window.location = targetDomain;
            }
        }

    }



</script>
